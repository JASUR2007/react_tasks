<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        `use strict`

        let user = {name: 'john'};
        let map = new WeakMap();
        map.set(user, 'data')

        user  = null

        console.log(map.has(user))

        let cache = new WeakMap();
        
        function cacheUser(user) {
            if (!cache.has(user)) {
                cache.set(user, Date.now());
            }

            return cache.get(user);
        }
        let Lena = {name: 'Lena'};
        let alex = {name: 'alex'};

        cacheUser(Lena);
        cacheUser(alex);

        Lena = null;

        console.log(cache.has(Lena));
        console.log(cache.has(alex));

        // weakset
        //add has delete
        let messages = [
            {text: 'hello', from: 'alex'},
            {text: 'Wae', from: 'Jack'},
            {text: 'AWE', from: 'John'}
        ]
        let set = new WeakSet();
        set.add(messages[0]);
        // set.add(messages[1]);

        set.add(messages[0]);
        
        messages.shift();
        console.log(set.has(messages[0]))
    </script>
</body>
</html>